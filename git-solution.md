## リモートリポジトリで自分が作業したブランチをマージした後に、マージを取り消したい時
1. ローカルリポジトリのDevelopブランチにて

```
git reset --hard HEAD^
```

2. developブランチのマージしたコミットの一つ前にコミットに戻っていることを確認する

```
git log
```

3.  ローカルからリモートに反映

```
git push -f origin develop
```

これでdevelopブランチがマージする前に戻る

## 過去のコミットを取り消したい時（履歴は消さない、変更しない場合）


1. 取り消したいコミットのハッシュを確認

```
git log --oneline
```

2. 過去のコミット(取り消したいコミットで行われた変更)を取り消すコミットを新たに作成

```
git revert <コミットハッシュ>
```

### ここでコンフリクトが発生した場合は下記の対応を行う

3. コンフリクトを解決した後、そのファイルをステージングする

```
git add <ファイル名>
```

4. ステージングが完了したらリバートを続行

```
git revert --continue
```

### リバートを中断したい場合
このコマンドによりリバートの途中状態がキャンセルされ、元の状態に戻ります

```
git revert --abort
```

コンフリクトが発生した場合は解消して保存

## git resetを取り消したいとき
git resetを使うと、ブランチのHEADを過去の状態に戻せる。
その状態を取り消したい、元に戻したい時には下記の手順を実行

1. ローカルリポジトリ内での HEAD の移動履歴を確認（どのコミットにいつ移動したかを確認）
```
git reflog
```
```
# 出力例
abc1234 (HEAD -> main) HEAD@{0}: reset: moving to HEAD~1
def5678 HEAD@{1}: commit: 修正した内容をコミット
ghijk90 HEAD@{2}: commit: 初期状態をコミット
```

2.リセットを取り消す
```
# HEAD@{1}がgit reset前の状態
git reset HEAD@{1}
```

## プルリクしてるものがコンフリクトした時
ローカルでコンフリクトを解消したいので、
1. リモートのdevelopブランチの内容をローカルに一時反映

```
git fetch origin develop
```

2. 作業ブランチにcheckoutして、developブランチの内容を作業ブランチに反映

```
git merge origin/develop
```

3. コンフリクトを起こしているファイルを修正して、コミット&プッシュで完了

## コードレビューを頼まれて、ローカルでそのコードをみたい時

1. コードレビューしたいリモートリポジトリの最新コミットを取得

```
git fetch origin [ブランチ名]
```

2. 取得したブランチにチェックアウトする。または、リモートと同じブランチをローカルに作成する

```
git checkout origin/[ブランチ名]
```

```
git checkout -b [新規ブランチ名] origin/[元にするブランチ名]

```

## 編集内容を取り消したい時
### 編集内容を取り消したい(addする前)

```
git checkout [ファイル名]
```

[ファイル名]のところを.にすると、ステージング前の全ての変更内容がなくなる。

### ステージングを取り消したい

```
git checkout HEAD -- [ファイル名]
```

ステージしたファイルを最後にコミットした状態に戻す
つまり編集内容は残らない。

## コミットせずに変更を保存し他（のブランチ）で作業をしたいとき

1. まず変更を退避する

```
git stash -u
```

-u オプションは新規作成ファイル(gitが反応してくれないファイル)も退避することができる

2. 退避した変更の一覧を見る

```
git stash list
```

退避した作業の一覧を見ることができる

3. 退避していた変更を戻す

```
git stash apply [stash名]
```

例）　`git stash apply stash@{0}`

現在いるブランチに変更が反映される

4. 退避した作業を消す

```
git stash drop [stash名]
```

例）`git stash drop stash@{0}`

stash名がstashのリストから削除される

5. 3と4を一気に片付けるコマンド

```
git stash pop [stash名]
```

例）　`git stash pop stash@{0}`

変更を現在いるブランチに反映すると同時に、退避した変更の一覧の中から削除する

## git logでコミット番号とメッセージだけで良い時（コミット履歴が見やすくなる）

```
git log --oneline
```

## ローカルでこまめにコミットしていた変更をまとめて一つのコミットとしてプッシュしたい時

1. コミットをまとめる範囲を指定して、interactiveモードでリベースする

```
git rebase -i HEAD~3
```

2. エディタで表示される内容を確認し、まとめるコミットを squash に変更

```
pick ijkl789 3個目のコミット
pick efgh456 2個目のコミット
pick abcd123 最初のコミット
```
上記から下記のように変更

```
pick ijkl789 3個目のコミット
squash efgh456 2個目のコミット
squash abcd123 最初のコミット
```

3. 開かれるエディタ(vimなど)で最上部にコミットメッセージを書いて、保存

## リベースを中断する
リベース中にコンフリクト（競合）が発生した時などに使用するとリベースを完全に中止し、開始前の状態に戻ることができる。

```
git rebase --abort
```




